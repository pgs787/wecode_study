__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t=4,s=i(d[1])['in-feed-story-item-width'].value+8,o=3;var n=r(d[15]).connect(function(t,s){const{reels:o,...n}=r(d[13]).mapStateToProps(t);return{reels:r(d[14]).getStoryTrayFromReelOrdering(t,s.reelIds)||o,...n}},r(d[13]).mapDispatchToProps)(class extends a(d[5]).PureComponent{constructor(...t){super(...t),this.state={isZeroBannerEligible:r(d[2]).isZeroRatingSlimEligible()},this.$InFeedStoryTray1=((t,s)=>{this.props.onLoadReel(i(d[3])(this.props.reels),t,s)}),this.$InFeedStoryTray2=(()=>{r(d[4]).logStoriesEvent({event_name:'reel_tray_play_all',containermodule:'reel_feed_timeline',source_of_action:'reel_feed_timeline',ig_userid:this.props.viewerId,tray_session_id:this.props.traySession,has_my_reel:i(d[3])(this.props.hasOwnReel),new_reel_count:i(d[3])(this.props.newReelCount),viewed_reel_count:i(d[3])(this.props.seenReelCount),clicked:'1'}),this.props.onLoadReel(i(d[3])(this.props.reels))}),this.$InFeedStoryTray3=((t,s)=>{r(d[4]).logStoriesEvent({event_name:'instagram_story_tray_impression',containermodule:'reel_feed_timeline',source_of_action:'reel_feed_timeline',ig_userid:this.props.viewerId,tray_session_id:this.props.traySession,media_author:t,tray_position:s,has_my_reel:i(d[3])(this.props.hasOwnReel),new_reel_count:i(d[3])(this.props.newReelCount),viewed_reel_count:i(d[3])(this.props.seenReelCount),hide_unit_if_seen:Boolean(this.props.hideUnitIfSeen),filtering_tag:this.props.filteringTag||void 0});const o=i(d[3])(this.props.reels).map(t=>t.id);this.props.onStoryItemScrollEnter(o.toArray(),t)}),this.$InFeedStoryTray4=(({index:t,isVisible:o})=>{const n={isVisible:o,isZeroBannerEligible:this.state.isZeroBannerEligible,onClick:this.$InFeedStoryTray1,onScrollEnter:this.$InFeedStoryTray3,trayPosition:t,onUpdateZeroNUXPreference:this.props.onUpdateZeroNUXPreference,hasSeenZeroNUX:this.props.hasSeenZeroNUX},l=i(d[3])(this.props.reels),p=i(d[3])(l.get(t)),c=a(d[5]).createElement(i(d[6]),i(d[7])({reel:p},n));return a(d[5]).createElement("div",{className:"g8rEa",key:p.id,style:r(d[8]).hasStoriesCaching()?{transform:`translateX(${t*s}px)`}:void 0},c)})}render(){const{reels:n,className:l,viewportWidth:p}=this.props,c=Math.max(o,Math.ceil(p/s));return null==n?null:a(d[5]).createElement("div",{className:l},a(d[5]).createElement("div",{className:`_4TVuL ${r(d[9]).isMobile()?"JPhJe":""}`},a(d[5]).createElement(r(d[10]).Box,{direction:"row",justifyContent:"between",marginBottom:4,marginEnd:4,marginStart:4,marginTop:2},a(d[5]).createElement(r(d[10]).Text,{color:"ig-secondary-text",weight:"semibold"},this.props.title),a(d[5]).createElement(r(d[10]).Button,{borderless:!0,onClick:this.$InFeedStoryTray2},a(d[5]).createElement(r(d[10]).Text,{weight:"semibold"},r(d[11]).WATCH_ALL_TEXT))),a(d[5]).createElement("div",{className:"l4Cdt"},a(d[5]).createElement(i(d[12]),{className:`_3FGxQ ${r(d[8]).hasStoriesCaching()?"X3Alp":""}`,containerSize:"auto",direction:"horizontal",estimatedItemSize:s,initialRenderCount:c,itemCount:i(d[3])(n).count(),overscanCount:t,renderer:this.$InFeedStoryTray4}))))}});e.default=n,e.MOBILE_TRAY_COL_WIDTH=s},13238272,[13238273,9699330,9830429,9633799,9830411,3,13238274,9633866,9633829,9633836,9633863,9830448,9830680,13238275,9830404,5]);
__d(function() {},13238273,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);let t=0;var s=r(d[10]).connect(function(t,s){const o=r(d[8]).getUserById(t,i(d[2])(s.reel.userId)),n=t.stories.reels.get(s.reel.id);let l=null;if(null!=(null===n||void 0===n?void 0:n.itemIds)&&i(d[2])(null===n||void 0===n?void 0:n.itemIds).length>0){const o=r(d[9]).getInitialReelIndex(t,s.reel.id),p=i(d[2])(null===n||void 0===n?void 0:n.itemIds)[o];p&&(l=t.posts.byId.get(p))}return{isLoading:t.stories.trayLoadingId===s.reel.id,isMuted:s.reel.muted,isSeen:r(d[9]).isReelSeen(s.reel),profilePictureUrl:i(d[2])(o.profilePictureUrl),username:i(d[2])(o.username),previewItem:l}})(class extends a(d[3]).PureComponent{constructor(...s){super(...s),this.state={isZeroNuxOpen:!1},this.$InFeedStoryTrayItem1=i(d[1])(s=>`InFeedStoryTrayItem_${t++}`),this.$InFeedStoryTrayItem3=(()=>{!0===this.props.isZeroBannerEligible?this.showZeroNuxOrPlay():this.props.onClick(this.props.reel.id,this.$InFeedStoryTrayItem1(this.props.reel.id))}),this.$InFeedStoryTrayItem2=(()=>{this.props.onScrollEnter(i(d[2])(this.props.reel.userId),this.props.trayPosition)}),this.$InFeedStoryTrayItem4=(t=>{t&&t.stopPropagation(),this.setState({isZeroNuxOpen:!1})}),this.$InFeedStoryTrayItem5=(t=>{t.stopPropagation();const{onUpdateZeroNUXPreference:s}=this.props;s&&s(),this.setState({isZeroNuxOpen:!1}),this.props.onClick(this.props.reel.id,this.$InFeedStoryTrayItem1(this.props.reel.id))}),this.showZeroNuxOrPlay=(()=>{!0!==this.props.hasSeenZeroNUX?this.setState({isZeroNuxOpen:!0}):this.props.onClick(this.props.reel.id,this.$InFeedStoryTrayItem1(this.props.reel.id))}),this.renderPreview=(()=>this.props.previewItem&&this.props.previewItem.src?a(d[3]).createElement("div",{className:`eN6wV ${this.props.isSeen?"INVJ1":""}`},a(d[3]).createElement(i(d[4]),{src:this.props.previewItem.src,srcSet:this.props.previewItem.displayResources})):a(d[3]).createElement("div",{className:"YOfgc"}))}componentDidMount(){this.props.isVisible&&this.$InFeedStoryTrayItem2()}componentDidUpdate(t){!t.isVisible&&this.props.isVisible&&this.$InFeedStoryTrayItem2()}render(){const{isMuted:t,profilePictureUrl:s,username:o}=this.props;let n=null;return!0===this.props.isZeroBannerEligible&&this.state.isZeroNuxOpen&&(n=a(d[3]).createElement(i(d[5]),{mediaKeyword:r(d[6]).ZeroNUXMedia.story,onAction:this.$InFeedStoryTrayItem5,onClose:this.$InFeedStoryTrayItem4,profilePictureUrl:s})),a(d[3]).createElement("button",{className:`_1rQDQ ${t?"Trb6G":""}`,onClick:this.$InFeedStoryTrayItem3,role:"menuitem",tabIndex:"0"},this.renderPreview(),a(d[3]).createElement("div",{className:"eQXXr"},a(d[3]).createElement(i(d[7]),{animateOnLoad:!0,clickTargetElementId:this.$InFeedStoryTrayItem1(this.props.reel.id),isClickable:!1,isLink:!1,profilePictureUrl:s,size:56,storyEntrypoint:"reel_feed_timeline",username:this.props.username}),a(d[3]).createElement("div",{className:"uI5Pp"},o)),n)}});e.default=s},13238274,[13238276,12517442,9633799,3,9830475,13238277,9830429,9830683,9633929,9830404,5]);
__d(function() {},13238276,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]),r(d[1]);const n=66,t=!1,c=64,s=r(d[2])(268),l=r(d[2])(423);e.default=function(u){const{profilePictureUrl:o}=u;r(d[3]).useEffect(()=>{r(d[4]).logZeroEvent({event_name:'nux_impression'})},[]);const f={nuxTitle:l,nuxAction:s,nuxIcon:a(d[3]).createElement("div",{className:"TFHq6"},a(d[3]).createElement(i(d[5]),{className:"_0zJgH",seen:t,size:c}),null!=o&&''!==o&&a(d[3]).createElement(i(d[6]),{isLink:!1,profilePictureUrl:o,size:n})),nuxIcon2:a(d[3]).createElement("div",{className:"coreSpriteSpinstaNux"})};return a(d[3]).createElement(i(d[7]),i(d[8])({nuxContent:f},u))}},13238277,[9633794,13238278,9633796,3,9633885,12517443,9633802,12517496,9633866]);
__d(function() {},13238278,[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t){const o=r(d[0]).getSeenCountInStoryTray(t);return{dataFetchStatus:t.feed.extrasDataFetchStatus,feedFilter:r(d[1]).getFeedFilter(t),hasOwnReel:r(d[0]).userHasReel(t,i(d[2])(t.users.viewerId)),hasSeenZeroNUX:!!t.zero.nuxPreference.story,isFullySeen:o=>{if(null!=o){const n=r(d[0]).getFirstUnseenReelItemIndex(t,o);return null!=n&&n<0}return!1},loadingId:t.stories.trayLoadingId,newReelCount:t.stories.feedTray&&t.stories.feedTray.count()-i(d[2])(o),reels:r(d[0]).getFeedStoryTrayWithoutOwn(t),seenReelCount:o,storyPrefetchFinished:t.feed.storyPrefetchComplete,traySession:t.stories.traySession,viewerId:t.users.viewerId,viewportWidth:t.displayProperties.viewportWidth}}function o(t){return{onLoadReel(o,n,s){t(r(d[3]).openReelsMedia(o,'reel_feed_timeline',n,s))},onUpdateZeroNUXPreference(){t(r(d[4]).updateZeroNUXPreference(r(d[5]).ZeroNUXMedia.story))},onStoryItemScrollEnter(o,n){t(r(d[3]).loadReelsMediaForTray(n,o,{batchSize:15,fetchDistance:5}))}}}Object.defineProperty(e,'__esModule',{value:!0});var n=r(d[6]).connect(t,o)(i(d[7]));e.default=n,e.mapStateToProps=t,e.mapDispatchToProps=o},13238275,[9830404,9961486,9633799,9830403,12517476,9830429,5,13238279]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t,n){return a(d[0]).SLOT_TO_SURFACES[n.slot].reduce((n,o)=>{var l;const u=null!=(l=t)&&null!=(l=l.qp)?l.promotions:l,c=u?u.get(o):null;return c?n.concat(c):n},[])}function n(t,n){return a(d[0]).SLOT_TO_TRIGGERS[n.slot]}function o(t,n){var o;return null===(o=n)||void 0===o?void 0:o.filter}Object.defineProperty(e,'__esModule',{value:!0});const l=r(d[1]).createSelector([t,n,o],(t,n,o)=>{return t.reduce((t,l)=>(l.triggers&&n.some(t=>l.triggers.includes(t))&&(!o||null==o[l.id]||o[l.id])&&t.push(l),t),[])[0]});e.getQPsBySlot=t,e.getTriggersBySlot=n,e.getFilters=o,e.getValidPromotion=l,e.shouldDisplayFacebookConnectQP=function(t,n){const o=t.qp.promotions.get(n);return!(!o||!o[0]||o[0].id!==i(d[2]).fbconnect)},e.getFeedFilter=(t=>t.qp.feedFilter)},9961486,[9961480,9,9961492]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});const _={activity:"activity",explore:"explore",feed:"feed",own_profile:"own_profile",other_profile:"other_profile",landing:"landing"},t={INTERSTITIAL:'5780',PAGE_TOP:'5095',TOOLTIP:'5906'},o={standard_megaphone_ig:"standard_megaphone_ig",standard_megaphone:"standard_megaphone",iig_dialog:"iig_dialog",iig_fullscreen:"iig_fullscreen",instagram_direct_launcher:"instagram_direct_launcher",instagram_footer_banner:"instagram_footer_banner",instagram_tool_tip:"instagram_tool_tip"},n={instagram_activity_feed_header:"instagram_activity_feed_header",instagram_activity_feed_prompt:"instagram_activity_feed_prompt",instagram_explore_prompt:"instagram_explore_prompt",instagram_feed_header:"instagram_feed_header",instagram_feed_prompt:"instagram_feed_prompt",instagram_feed_tool_tip:"instagram_feed_tool_tip",instagram_profile_page:"instagram_profile_page",instagram_other_profile_page_header:"instagram_other_profile_page_header",instagram_landing_page:"instagram_landing_page"},p={[_.activity]:[t.PAGE_TOP,t.INTERSTITIAL,t.TOOLTIP],[_.explore]:[t.PAGE_TOP,t.INTERSTITIAL,t.TOOLTIP],[_.feed]:[t.PAGE_TOP,t.INTERSTITIAL,t.TOOLTIP],[_.own_profile]:[t.PAGE_TOP,t.INTERSTITIAL,t.TOOLTIP],[_.other_profile]:[t.PAGE_TOP,t.INTERSTITIAL,t.TOOLTIP],[_.landing]:[t.PAGE_TOP,t.INTERSTITIAL,t.TOOLTIP]},T={[_.activity]:[n.instagram_activity_feed_header,n.instagram_activity_feed_prompt],[_.explore]:[n.instagram_explore_prompt],[_.feed]:[n.instagram_feed_header,n.instagram_feed_prompt,n.instagram_feed_tool_tip],[_.own_profile]:[n.instagram_profile_page],[_.other_profile]:[n.instagram_other_profile_page_header],[_.landing]:[n.instagram_landing_page]},l={[o.standard_megaphone]:72,[o.iig_dialog]:80,[o.iig_fullscreen]:80,[o.instagram_footer_banner]:72};e.SLOTS=_,e.SURFACES=t,e.TEMPLATES=o,e.TRIGGERS=n,e.SLOT_TO_SURFACES=p,e.SLOT_TO_TRIGGERS=T,e.IMAGE_SIZES=l,e.LOG_EVENTS={click:"click",view:"view"},e.OBJECT_IDS={dismiss:"dismiss",primary:"primary",secondary:"secondary"},e.QP_TOOLTIP_PARAMETERS={tooltip_anchor:"tooltip_anchor",tooltip_direction:"tooltip_direction",tooltip_duration:"tooltip_duration"},e.QP_TOOLTIP_ANCHORS={profile_icon:"profile_icon",story_tray_item:"story_tray_item"},e.QP_TOOLTIP_DIRECTIONS={UP:"UP",DOWN:"DOWN"}},9961480,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var n={fbconnect:'1939973836325880',gdprDialog:'385107635302749',gdprFullscreen:'361346177689723',gdprMegaphoneDis:'1432819323512524',gdprMegaphoneNondis:'1126242244191536'};e.default=n},9961492,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t=4,o=80,s=10;var n=i(d[19])('StoryTray',i(d[20])(class extends a(d[8]).PureComponent{constructor(...t){super(...t),this.state={isZeroBannerEligible:r(d[1]).isZeroRatingSlimEligible()},this.didLogComponentLoad=!1,this.didLogStoryTrayLoad=!1,this.$StoryTray2=(()=>{const{dataFetchStatus:t}=this.props,o=t!==r(d[2]).EXTRAS_DATA_FETCH_STATUS.loaded;this.didLogComponentLoad||o?!this.didLogStoryTrayLoad&&o&&(r(d[3]).StoryTrayLoadPerformanceLogger.onStoryTrayLoadSuccess(),this.didLogStoryTrayLoad=!0):(r(d[3]).StoryTrayLoadPerformanceLogger.onTrayComponentLoad({hasCaching:r(d[4]).hasStoriesCaching()}),this.didLogComponentLoad=!0)}),this.$StoryTray3=((t,o)=>{this.props.onLoadReel(i(d[5])(this.props.reels),t,o)}),this.$StoryTray4=((t,o)=>{const s=this.props.reels?this.props.reels.get(o-1):null;i(d[6]).log(()=>({a_pk:Number(t),is_new_reel:this.props.isFullySeen(null===s||void 0===s?void 0:s.id)?0:1,has_my_reel:i(d[5])(this.props.hasOwnReel)?1:0,new_reel_count:i(d[5])(this.props.newReelCount),pigeon_reserved_keyword_module:'reel_feed_timeline',reel_type:r(d[7]).getTypeForLogging(null===s||void 0===s?void 0:s.type),tray_position:o,tray_session_id:this.props.traySession,viewed_reel_count:i(d[5])(this.props.seenReelCount)}));const n={containermodule:'reel_feed_timeline',event_name:'reel_tray_impression',has_my_reel:i(d[5])(this.props.hasOwnReel),ig_userid:this.props.viewerId,media_author:t,new_reel_count:i(d[5])(this.props.newReelCount),source_of_action:'reel_feed_timeline',tray_position:o,tray_session_id:this.props.traySession,viewed_reel_count:i(d[5])(this.props.seenReelCount)};!0===(null===s||void 0===s?void 0:s.isCloseFriends)&&(n.action='close_friends_story_ring_impression'),r(d[7]).logStoriesEvent(n)}),this.$StoryTray5=(({index:t,isVisible:s})=>{const n={isVisible:s,isZeroBannerEligible:this.state.isZeroBannerEligible,onClick:this.$StoryTray3,onScrollEnter:this.$StoryTray4,trayPosition:t,onUpdateZeroNUXPreference:this.props.onUpdateZeroNUXPreference,hasSeenZeroNUX:this.props.hasSeenZeroNUX},l=this.$StoryTray6()?t-1:t;let p,h;if(-1===l)p=a(d[8]).createElement(i(d[9]),i(d[10])({hasOwnReel:this.props.hasOwnReel,viewerId:this.props.viewerId},n));else{const t=i(d[5])(this.props.reels);h=i(d[5])(t.get(l)),p=a(d[8]).createElement(i(d[11]),i(d[10])({reel:h},n))}return a(d[8]).createElement("div",{className:"Fd_fQ",key:h?h.id:'own',style:r(d[4]).hasStoriesCaching()?{transform:`translateX(${t*o}px)`}:void 0},p)}),this.$StoryTray6=(()=>!!r(d[12]).isMobile()||!!this.props.hasOwnReel),this.$StoryTray7=(()=>{const{reels:t}=this.props,o=this.$StoryTray6()?1:0;return(null!=t?t.count():0)+o}),this.$StoryTray8=(()=>this.props.dataFetchStatus===r(d[2]).EXTRAS_DATA_FETCH_STATUS.loading),this.$StoryTray9=(()=>{const{reels:t,seenReelCount:o}=this.props;return t&&-1!==o&&t.count()-o>0})}componentDidMount(){this.$StoryTray1(),this.$StoryTray2()}componentDidUpdate(){this.$StoryTray1(),this.$StoryTray2()}$StoryTray1(){null!=this.props.reels&&this.props.onDisplayDone()}render(){const{feedFilter:n,reels:l,viewportWidth:p}=this.props,h=this.$StoryTray8(),y=this.$StoryTray7(),c=this.$StoryTray9(),_=Math.max(s,Math.ceil(p/o));return a(d[8]).createElement(a(d[8]).Fragment,null,a(d[8]).createElement(i(d[13]),null,h&&a(d[8]).createElement("div",{className:`u6s6p ${h?"":"UZmR1"}`},h&&a(d[8]).createElement(r(d[14]).Box,{alignItems:"center",direction:"row",justifyContent:"center"},a(d[8]).createElement(r(d[14]).Spinner,null))),null==l?a(d[8]).createElement(i(d[15]),null):a(d[8]).createElement("div",{className:`ku8Bn ${null==l?"p2GVa":""}`},a(d[8]).createElement(i(d[16]),{className:`qf6s4 ${r(d[4]).hasStoriesCaching()?"lGuO0":""}`,containerSize:"auto",direction:"horizontal",estimatedItemSize:o,initialRenderCount:_,itemCount:y,overscanCount:t,renderer:this.$StoryTray5}))),r(d[12]).isMobile()&&!0===c&&a(d[8]).createElement("div",{className:"RN9GI"},a(d[8]).createElement(i(d[17]),{anchor:a(d[18]).QP_TOOLTIP_ANCHORS.story_tray_item,filter:n,slot:a(d[18]).SLOTS.feed,trigger:a(d[18]).TRIGGERS.instagram_feed_tool_tip})))}}));e.default=n,e.MOBILE_TRAY_COL_WIDTH=o},13238279,[13238280,9830429,13238281,9830410,9633829,9633799,13107209,9830411,3,13238282,9633866,13238283,9633836,13238284,9633863,13238285,9830680,13238286,9961480,9633843,9830441]);
__d(function() {},13238280,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});const o={pigeon:!1,falco:!0};e.default=class{static log(t){i(d[0])._("26")&&r(d[1]).FalcoLogger.log('reel_tray_impression',t(),{},o)}}},13107209,[9633920,9830464]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]),r(d[1]);var t=r(d[18]).connect(function(t,n){const l=r(d[14]).getUserById(t,n.viewerId);return{isAppUpsellLoggedInSheetOpen:t.upsell.isAppUpsellLoggedInSheetOpen,profilePictureUrl:l.profilePictureUrl,reel:r(d[15]).getReel(t,n.viewerId)}},function(t){return{openAppUpsellLoggedInSheet(n){t(r(d[16]).openAppUpsellLoggedInSheet(n))},onOpenReel(n,l,o){t(r(d[17]).openReel(n,l,o))}}})(class extends a(d[8]).Component{constructor(...t){super(...t),this.$OwnStoryTrayItem1=(()=>{r(d[2]).isMobile()&&(r(d[3]).isDismissed(r(d[3]).USE_THE_APP_LI_SHEET)||!0!==i(d[4])._("47","7",{silent:!0})?i(d[6])(this.$OwnStoryTrayItem2).handleStoryCreationClick():this.props.openAppUpsellLoggedInSheet(i(d[5]).StoryCreationPage))}),this.$OwnStoryTrayItem3=((t,n)=>{this.props.onOpenReel(t,n,'reel_feed_timeline')})}render(){const{hasOwnReel:t,profilePictureUrl:n,...l}=this.props;if(!0===t){const{reel:t,onOpenReel:n,viewerId:o,openAppUpsellLoggedInSheet:s,isAppUpsellLoggedInSheetOpen:p,...c}=l;return null!=t||i(d[7])(0),a(d[8]).createElement(i(d[9]),i(d[10])({},c,{onClick:this.$OwnStoryTrayItem3,reel:t}))}return a(d[8]).createElement("button",{className:"JdY43",onClick:this.$OwnStoryTrayItem1},a(d[8]).createElement(i(d[11]),{className:"ctM9u",isLink:!1,profilePictureUrl:n,size:56}),this.props.isAppUpsellLoggedInSheetOpen&&!0===i(d[4])._("47","7",{silent:!0})?a(d[8]).createElement(i(d[12]),{pageID:i(d[5]).StoryCreationPage}):null,a(d[8]).createElement("div",{className:"XdXBI"},r(d[9]).YOUR_STORY_TEXT),a(d[8]).createElement("div",{className:"coreSpriteStoryCreationAlt TiuNS"}),a(d[8]).createElement(i(d[13]),{entryPoint:"your_story_placeholder",ref:t=>this.$OwnStoryTrayItem2=t}))}});e.default=t},13238282,[9633794,13238287,9633836,13238288,9633909,9633807,9633799,9502826,3,13238283,9633866,9633802,9830417,13238289,9633929,9830404,9830407,9830403,5]);
__d(function() {},13238287,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);let t=0;const s=r(d[1])(974);var o=r(d[10]).connect(function(t,s){const o=r(d[8]).getUserById(t,i(d[3])(s.reel.userId));return{isMuted:s.reel.muted,isSeen:r(d[9]).isReelSeen(s.reel),isViewer:t.users.viewerId===s.reel.id,profilePictureUrl:i(d[3])(o.profilePictureUrl),username:i(d[3])(o.username)}})(class extends a(d[4]).PureComponent{constructor(...s){super(...s),this.state={isZeroNuxOpen:!1},this.$StoryTrayItem1=i(d[2])(s=>`StoryTrayItem_${t++}`),this.$StoryTrayItem3=(()=>{!0===this.props.isZeroBannerEligible?this.showZeroNuxOrPlay():this.props.onClick(this.props.reel.id,this.$StoryTrayItem1(this.props.reel.id))}),this.$StoryTrayItem2=(()=>{this.props.onScrollEnter(i(d[3])(this.props.reel.userId),this.props.trayPosition)}),this.$StoryTrayItem4=(t=>{t&&t.stopPropagation(),this.setState({isZeroNuxOpen:!1})}),this.$StoryTrayItem5=(t=>{t.stopPropagation();const{onUpdateZeroNUXPreference:s}=this.props;s&&s(),this.setState({isZeroNuxOpen:!1}),this.props.onClick(this.props.reel.id,this.$StoryTrayItem1(this.props.reel.id))}),this.showZeroNuxOrPlay=(()=>{!0!==this.props.hasSeenZeroNUX?this.setState({isZeroNuxOpen:!0}):this.props.onClick(this.props.reel.id,this.$StoryTrayItem1(this.props.reel.id))})}componentDidMount(){this.props.isVisible&&this.$StoryTrayItem2()}componentDidUpdate(t){!t.isVisible&&this.props.isVisible&&this.$StoryTrayItem2()}render(){const{isMuted:t,isSeen:o,isViewer:n,profilePictureUrl:p,username:l}=this.props,h=n?s:l;let y=null;return!0===this.props.isZeroBannerEligible&&this.state.isZeroNuxOpen&&(y=a(d[4]).createElement(i(d[5]),{mediaKeyword:r(d[6]).ZeroNUXMedia.story,onAction:this.$StoryTrayItem5,onClose:this.$StoryTrayItem4,profilePictureUrl:p})),a(d[4]).createElement("button",{className:`-wt5I ${t?"AChYo":""}`,onClick:this.$StoryTrayItem3,role:"menuitem",tabIndex:"0"},a(d[4]).createElement(i(d[7]),{className:"XAMfi",clickTargetElementId:this.$StoryTrayItem1(this.props.reel.id),isClickable:!1,isLink:!1,profilePictureUrl:p,size:56,storyEntrypoint:"reel_feed_timeline",username:this.props.username}),a(d[4]).createElement("div",{className:`_0G-TY ${o?"DvgU8":""}`},h),y)}});e.default=o,e.YOUR_STORY_TEXT=s},13238283,[13238290,9633796,12517442,9633799,3,13238277,9830429,9830683,9633929,9830404,5]);
__d(function() {},13238290,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});class t extends a(d[4]).Component{constructor(...t){super(...t),this.state={isIgLiteCreationDialogOpen:!1},this.hideIgLiteCreationDialog=(()=>{this.setState({isIgLiteCreationDialogOpen:!1})}),this.$StoryCreationFileForm1=(()=>{this.setState({isIgLiteCreationDialogOpen:!0})}),this.handleStoryCreationClick=(()=>{r(d[0]).isIgLite()?this.$StoryCreationFileForm1():!0!==this.$StoryCreationFileForm2&&(i(d[1]).startFunnel(r(d[2]).STORY_CREATION_FUNNEL),this.$StoryCreationFileForm2=!0,this.props.onStartStoryCreation(this.props.entryPoint).then(()=>{i(d[3])(this.$StoryCreationFileForm3).selectFile(),this.$StoryCreationFileForm2=!1}).catch(()=>{this.$StoryCreationFileForm2=!1}))})}render(){return r(d[0]).isIgLite()?this.state.isIgLiteCreationDialogOpen&&a(d[4]).createElement(i(d[5]),{hideDialog:this.hideIgLiteCreationDialog,onImageFormError:this.props.onImageFormError,onMediaSelect:this.props.onMediaSelect,onStartCreation:this.props.onStartStoryCreation,showVideo:!0}):a(d[4]).createElement(i(d[6]),{acceptMimeTypes:['image/jpeg'],onFileChange:this.props.onMediaSelect,ref:t=>this.$StoryCreationFileForm3=t})}}var o=r(d[9]).connect(null,function(t){return{onMediaSelect(o){o.length&&(i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_PICKED_FILE),t(r(d[7]).storyCreationSelectMedia(o[0])))},onStartStoryCreation:o=>t(r(d[7]).startStoryCreationSession(o)),onImageFormError(){t(r(d[8]).showToast({text:r(d[6]).IMAGE_FORM_ERROR}))}}},null,{forwardRef:!0})(t);e.default=o,e.StoryCreationFileForm=t},13238289,[9633836,9633873,11927563,9633799,3,10223650,9961575,11927557,10223652,5]);
__d(function(g,r,i,a,m,e,d){"use strict";function n(n,o,c){const u=t(n,o);_(),A(u),i(d[0]).shouldLog(n)&&(b[u]=new(i(d[1]).Funnel)(n,o,i(d[0]).getSamplingRate(n),!1,null!=c?c:Date.now()),v(u))}function o(n,o,u){const v=t(n,o);c(v)&&(b[v].appendAction(i(d[1]).ActionType.ACTION_END,i(d[1]).EndType.EXPLICIT,void 0,u),N(v))}function t(n,o){return void 0===o||null===o?n:n+o.toString()}function c(n){return void 0!==b[n]}function u(n,o,u){const f=t(n,o);c(f)&&(b[f].timeout_sec=u,b[f].devModeLogger('Timeout set to %s sec',u),v(f))}function v(n){f(n),b[n].timeout_handle=setTimeout(function(){b[n].appendAction(i(d[1]).ActionType.ACTION_END,i(d[1]).EndType.TIMEOUT),N(n)},1e3*b[n].timeout_sec)}function f(n){b[n].timeout_handle&&clearTimeout(b[n].timeout_handle)}function p(n,o,u){const f=t(n,o);c(f)&&(b[f].addTag(u),v(f))}function s(n,o,u){const v=t(n,o);c(v)&&(b[v].shouldTrackFocus=u,b[v].devModeLogger('Focus tracking %s',u?'on':'off'))}function l(n,o,u,f,p,s){const l=t(n,o);c(l)&&(b[l].appendAction(u,f,p,s),v(l))}function T(n,o,u,v,f){const p=t(n,o);c(p)&&b[p].appendActionIfNew(u,v,f)}function A(n){c(n)&&(b[n].appendAction(i(d[1]).ActionType.ACTION_END,i(d[1]).EndType.RESTART),N(n))}function N(n){if(c(n)){const o=b[n].getLogData();r(d[2]).logPigeonEvent(r(d[3]).createEvent('funnel_analytics',o)),b[n].devModeLogger('Logged: %s',JSON.stringify(o)),f(n),b[n]=void 0}}function S(){for(const n in b)b.hasOwnProperty(n)&&c(n)&&(b[n].appendAction(i(d[1]).ActionType.ACTION_END,i(d[1]).EndType.SESSION_END),N(n))}function y(){if(I){I=!1;for(const n in b)b.hasOwnProperty(n)&&c(n)&&b[n].shouldTrackFocus&&(b[n].appendAction(i(d[1]).ActionType.ACTION_WINDOW_BLUR),f(n))}}function h(){if(!I){I=!0;for(const n in b)b.hasOwnProperty(n)&&c(n)&&b[n].shouldTrackFocus&&(b[n].appendAction(i(d[1]).ActionType.ACTION_WINDOW_FOCUS),f(n))}}function _(){E||(E=!0,window.addEventListener&&(i(d[4]).subscribe(r(d[5]).SHUTDOWN,S),window.addEventListener('blur',y),window.addEventListener('focus',h)))}Object.defineProperty(e,'__esModule',{value:!0});const b={};let E=!1,I=!0;var O={startFunnel:function(o,t){n(o,t)},startFunnelAtTime:function(o,t,c){n(o,c,t)},setFunnelTimeout:function(n,o,t){void 0===t?u(n,void 0,o):t&&u(n,o,t)},setFunnelTrackFocus:function(n,o,t){void 0===t?s(n,void 0,Boolean(o)):s(n,Number(o),t)},addFunnelTag:function(n,o,t){void 0===t?p(n,void 0,String(o)):p(n,Number(o),t)},appendAction:function(n,o,t){void 0===t?l(n,void 0,String(o),void 0):l(n,Number(o),t,void 0)},appendActionAtTime:function(n,o,t,c){void 0===c?l(n,void 0,String(t),void 0,void 0,o):l(n,Number(t),c,void 0,void 0,o)},appendActionIfNew:function(n,o,t){void 0===t?T(n,void 0,String(o),void 0):T(n,Number(o),t,void 0)},appendActionWithTag:function(n,o,t,c){void 0===c?l(n,void 0,String(o),t):l(n,Number(o),t,c)},appendActionAtTimeWithTag:function(n,o,t,c,u){void 0===u?l(n,void 0,String(t),c,void 0,o):l(n,Number(t),c,u,void 0,o)},appendActionWithTagIfNew:function(n,o,t,c){void 0===c?T(n,void 0,String(o),t):T(n,Number(o),t,c)},appendActionWithPayload:function(n,o,t,c){void 0===c?l(n,void 0,String(o),void 0,t):l(n,Number(o),String(t),void 0,c)},appendActionAtTimeWithPayload:function(n,o,t,c,u){void 0===u?l(n,void 0,String(t),void 0,c,o):l(n,Number(t),String(c),void 0,u,o)},appendActionWithPayloadIfNew:function(n,o,t,c){void 0===c?T(n,void 0,String(o),void 0,t):T(n,Number(o),String(t),void 0,c)},appendActionWithTagAndPayload:function(n,o,t,c,u){void 0===u?l(n,void 0,String(o),t,c):l(n,Number(o),String(t),String(c),u)},appendActionAtTimeWithTagAndPayload:function(n,o,t,c,u,v){void 0===v?l(n,void 0,String(t),c,u,o):l(n,Number(t),String(c),String(u),v,o)},appendActionWithTagAndPayloadIfNew:function(n,o,t,c,u){void 0===u?T(n,void 0,String(o),t,c):T(n,Number(o),String(t),String(c),u)},cancelFunnel:function(n,o){const u=t(n,o);c(u)&&(b[u].devModeLogger('Cancelled funnel'),f(u),b[u]=void 0)},endFunnel:function(n,t){o(n,t)},endFunnelAtTime:function(n,t,c){o(n,c,t)},getFunnelInstance:function(n,o){const u=t(n,o);return c(u)?b[u]:null}};e.default=O},9633873,[9633883,9633884,9633885,9633886,9633887,9633888]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t){return 1}Object.defineProperty(e,'__esModule',{value:!0});var n={shouldLog:function(t){return 1*Math.random()<1},getSamplingRate:t};e.default=n},9633883,[]);
__d(function(g,r,i,a,m,e,d){"use strict";function n(n,t,s,l,u){let o=s,h=l;for(;o+1<h;){const s=o+Math.floor((h-o)/2);u(n(s),t)>0?h=s:o=s}return o<h&&u(n(o),t)>0?o:h}Object.defineProperty(e,'__esModule',{value:!0});const t='name',s='instance_id',l='start_time',u='tags',o='actions',h='sampling_rate',F='timeout_sec',c=600;var $={Funnel:class{constructor(n,t,s,l,u){this.$Funnel1=n,this.$Funnel2=t,this.$Funnel3=[],this.$Funnel4={},this.$Funnel5=s,this.$Funnel6=u,this.timeout_sec=c,this.shouldTrackFocus=!1,this.$Funnel7=l,this.devModeLogger('Started funnel')}addTag(n){return'string'==typeof n||r(d[0])(0),this.$Funnel4[n]=!0,this.devModeLogger('Added funnel tag %s',n),this}appendAction(t,s,l,u=Date.now()){const o=new(i(d[1]))(t,u-this.$Funnel6,s,l),h=n(n=>this.$Funnel3[n].getData(),o.getData(),0,this.$Funnel3.length,(n,t)=>'funnel_end'===n.name?1:'funnel_end'===t.name?-1:n.relative_time-t.relative_time);return this.$Funnel3.splice(h,0,o),s?this.devModeLogger('Appended action %s with tag %s',t,s):this.devModeLogger('Appended action %s',t),this.$Funnel8=t,this}appendActionIfNew(n,t,s){return n!==this.$Funnel8&&this.appendAction(n,t,s),this}getLogData(){const n={};n[t]=this.$Funnel1,void 0!==this.$Funnel2?n[s]=this.$Funnel2:n[s]=Math.floor(65536*Math.random()),n[l]=this.$Funnel6,n[h]=this.$Funnel5,n[F]=this.timeout_sec,n[u]=[];for(const t in this.$Funnel4)!0===this.$Funnel4[t]&&n[u].push(t);if(this.$Funnel3.length>0){n[o]=[];for(let t=0;t<this.$Funnel3.length;t++)n[o].push(this.$Funnel3[t].getData())}return n}devModeLogger(...n){this.$Funnel7&&r(d[2]).getCanLogToConsole()&&console.log('Funnel %s%s: %s',this.$Funnel1,this.$Funnel2?' instance '+this.$Funnel2:'',r(d[3]).apply(null,n))}getTags(){return this.$Funnel4}},EndType:{EXPLICIT:'explicit',TIMEOUT:'timeout',SESSION_END:'session_end',RESTART:'restart',ACTIONS_FULL:'actions_full'},ActionType:{ACTION_END:'funnel_end',ACTION_WINDOW_BLUR:'window_blur',ACTION_WINDOW_FOCUS:'window_focus'}};e.default=$},9633884,[9502826,9633889,9633890,9633891]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=class{constructor(t,n,o,s){this.$FunnelAction1={name:t,relative_time:n,tag:void 0!==o?o:void 0,payload:void 0!==s?JSON.stringify(s):void 0}}getData(){return this.$FunnelAction1}};e.default=t},9633889,[]);
__d(function(g,r,i,a,m,e,d){m.exports=function(n,...t){let c=0;return n.replace(/%s/g,n=>t[c++])}},9633891,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});e.STORY_CREATION_BAD_ASPECT_RATIO='bad_aspect_ratio',e.STORY_CREATION_DISCARD_CANCEL='discard_cancel',e.STORY_CREATION_DISCARD_CONFIRMATION='discard_confirmation',e.STORY_CREATION_DOODLE_ENTER='story_creation_doodle_enter',e.STORY_CREATION_DOODLE_EXIT='story_creation_doodle_exit',e.STORY_CREATION_FINALIZE_FAILED='story_finalize_failed',e.STORY_CREATION_FUNNEL='IG_WEB_STORY_CREATION_FUNNEL',e.STORY_CREATION_PICKED_FILE='picked_file',e.STORY_CREATION_SAVE='save',e.STORY_CREATION_START_PICK_FILE='start_pick_file',e.STORY_CREATION_STORY_CREATION_FAILED='story_creation_failed',e.STORY_CREATION_STORY_CREATION_SUCCESS='story_creation_success',e.STORY_CREATION_UPLOAD_STAGE_SUCCESS='upload_staged',e.STORY_CREATION_UPLOAD_START='upload_start'},11927563,[]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t,n){const o=n.storyCreation,{start_time:_,...T}=o.logData,E=(Date.now()-_)/1e3,R=o.canvasStickers;let O=!1;const S=[];for(const t of R)t.type===r(d[7]).TEXT_TYPE?O=!0:S.push(t.variants[0].id);return{...T,exit_point:r(d[6]).STORY_CREATION_EXIT_POINT.POST,has_brush:o.activeDrawing.linesArray.length>0,has_sticker:S.length>0,has_text:O,step:t,sticker_ids:S,waterfall_duration:E,waterfall_id:i(d[8])(o.sessionId)}}function n(n){return(o,_)=>{const T=_();return r(d[6]).logStoryCreationEvent(t('image_process_attempt',T)),i(d[14])(i(d[9])(n).then(T=>{o({type:r(d[0]).STORY_CREATION_IMAGE_PROCESSED,height:T.height,location:T.location,orientation:T.orientation,sourceDataURL:T.dataURL,sourceImage:n,width:T.width,flash:T.flash}),r(d[6]).logStoryCreationEvent(t('image_process_success',_())),i(d[15]).push('/create/story/')},n=>{r(d[6]).logStoryCreationEvent(t('image_process_failure',T)),o(r(d[3]).showToast({text:r(d[16])(2037),persistOnNavigate:!0})),n instanceof Error?(n.name='[StoryCreation] '+n.name,r(d[17]).logError(n)):i(d[18])('[StoryCreation] error in processing image')}))}}function o(t){return(n,o)=>{const _=Date.now().toString(),T=`story_${_}`;return i(d[14])(i(d[10])(t).then(o=>(n({type:r(d[0]).STORY_CREATION_VIDEO_PROCESSED,dataURL:o.src,entityName:T,file:t,uploadId:_,uploadMediaHeight:o.videoHeight,uploadMediaWidth:o.videoWidth,uploadMediaDurationMs:Math.floor(1e3*o.duration),videoTransform:null,mediaPublishMode:r(d[19]).MediaPublishMode.REEL}),i(d[20])(o))).then(t=>{n({type:r(d[0]).STORY_CREATION_VIDEO_COVER_PHOTO_UPDATED,dataURL:t.dataURL,entityName:T,file:t.file,uploadId:_,uploadMediaHeight:t.uploadMediaHeight,uploadMediaWidth:t.uploadMediaWidth}),i(d[15]).push('/create/story/')}).catch(t=>{t instanceof Error?(t.name='[StoryCreation] '+t.name,r(d[17]).logError(t)):i(d[18])('[StoryCreation] error in processing video')}))}}function _(t){return n=>i(d[14])(r(d[21]).creationFinalizeStory(t).then(o=>{if(!o.media||!o.media.pk)throw o;n({type:r(d[0]).STORY_CREATION_UPLOAD_SUCCEEDED,toast:{text:r(d[4]).VIDEO_ADDED_TEXT,persistOnNavigate:!0},uploadId:t}),n(T())}))}function T(){return(t,n)=>t(r(d[24]).refreshStoryReels()).then(()=>{const o=i(d[8])(r(d[25]).getViewer(n()));t(r(d[24]).invalidateStoryReel(o.id)),i(d[15]).push('/'),t(r(d[23]).setNavSelection('NAVIGATION_SECTION_HOME'))})}Object.defineProperty(e,'__esModule',{value:!0});const E='error',R=t=>{for(let n=0;n<t.length;n++)if('number'==typeof t[n].id)return n;return-1};e.setCanvasDimensions=function(t,n){return{type:r(d[0]).STORY_CREATION_SET_CANVAS_DIMENSIONS,canvasWidth:t,canvasHeight:n}},e.startStoryCreationSession=function(t){return(n,o)=>new Promise(function(_,T){const{viewportHeight:E,viewportWidth:R}=o().displayProperties;if(E<R)return i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_BAD_ASPECT_RATIO),i(d[1]).endFunnel(r(d[2]).STORY_CREATION_FUNNEL),n(r(d[3]).showToast({text:r(d[4]).STORY_LANDSCAPE_WARNING_TEXT})),T({});i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_START_PICK_FILE);const O=i(d[5])();return n({type:r(d[0]).STORY_CREATION_SESSION_STARTED,sessionId:O,entryPoint:t,startTime:Date.now()}),r(d[6]).logStoryCreationEvent({step:'enter',waterfall_id:O,entry_point:t}),_({})})},e.storyCreationSelectMedia=function(t){return _=>{const T=t.type;r(d[9]).isImage(T)?_(n(t)):r(d[10]).isVideo(T)&&r(d[11]).getIgLiteStoryVideoUploadQE()?_(o(t)):(_(r(d[12]).updateCreationError(new Error(r(d[13]).NOT_SUPPORTED_MEDIA_TEXT))),_(r(d[12]).updateCreationDialogStatus('error')))}},e.storyCreationSelectImage=n,e.storyCreationSelectVideo=o,e.uploadStory=function(n,o){return(_,E)=>{_({type:r(d[0]).STORY_CREATION_UPLOAD_REQUESTED,uploadedBlob:n}),i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_UPLOAD_START);let R=E();const O=R.storyCreation.activeText.renderText.join('\n');return r(d[6]).logStoryCreationEvent(t('compose_stage_attempt',R)),i(d[14])(r(d[21]).fbUploaderPhoto(n).then(n=>{i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_UPLOAD_STAGE_SUCCESS);const o=n.upload_id;return _({type:r(d[0]).STORY_CREATION_UPLOAD_STAGED,uploadId:o}),R=E(),r(d[6]).logStoryCreationEvent(t('compose_finalize_attempt',R)),r(d[21]).creationFinalizeStory(o,O).then(n=>{i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_STORY_CREATION_SUCCESS),i(d[1]).endFunnel(r(d[2]).STORY_CREATION_FUNNEL),r(d[6]).logStoryCreationEvent(t('compose',R)),_({type:r(d[0]).STORY_CREATION_UPLOAD_SUCCEEDED,toast:{text:r(d[4]).PHOTO_ADDED_TEXT,persistOnNavigate:!0},uploadId:o}),_(T())}).catch(t=>{throw i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_FINALIZE_FAILED),t})}).catch(n=>{i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_STORY_CREATION_FAILED),o||i(d[1]).endFunnel(r(d[2]).STORY_CREATION_FUNNEL),r(d[6]).logStoryCreationEvent(t('compose_failure',R)),_({type:r(d[0]).STORY_CREATION_UPLOAD_FAILED,toast:{text:r(d[4]).UPLOAD_FAILED_TEXT,persistOnNavigate:!0,actionText:o&&r(d[22]).RETRY_TEXT,actionHandler:o}}),n instanceof Error?(n.name='[StoryCreation] '+n.name,r(d[17]).logError(n)):i(d[18])('[StoryCreation] error in uploading story')}))}},e.uploadStoryVideo=function(){return(t,n)=>{const{sourceVideo:o,coverPhoto:T}=n().storyCreation,E=i(d[8])(o).uploadId;return t({type:r(d[0]).STORY_CREATION_VIDEO_UPLOAD_REQUESTED}),i(d[14])(r(d[21]).ruploadVideo(o).then(()=>r(d[21]).ruploadPhoto(T)).then(()=>t(_(E))).catch(n=>{i(d[15]).push('/'),t(r(d[23]).setNavSelection('NAVIGATION_SECTION_HOME')),t({type:r(d[0]).STORY_CREATION_UPLOAD_FAILED,toast:{text:r(d[4]).UPLOAD_FAILED_TEXT,persistOnNavigate:!0}})}))}},e.refreshStoryReelAndNavigateToFeed=T,e.changeActiveText=function(t,n,o){return{type:r(d[0]).STORY_CREATION_CHANGE_TEXT,rawText:t,width:n,height:o}},e.enterAddText=function(){return{type:r(d[0]).STORY_CREATION_ENTER_ADD_TEXT}},e.enterEditText=function(){return{type:r(d[0]).STORY_CREATION_ENTER_EDIT_TEXT}},e.saveText=function(t,n){return{type:r(d[0]).STORY_CREATION_SAVE_TEXT,renderText:t,timeSpent:n}},e.transformCanvasSticker=function(t,n){return{type:r(d[0]).STORY_CREATION_TRANSFORM_CANVAS_STICKER,stillMoving:t,transform:n}},e.deleteCanvasSticker=function(){return{type:r(d[0]).STORY_CREATION_DELETE_CANVAS_STICKER}},e.moveCanvasSticker=function(t,n,o){return{type:r(d[0]).STORY_CREATION_MOVE_CANVAS_STICKER,deltaX:t,deltaY:n,overTrash:o}},e.changeBrush=function(t){return{type:r(d[0]).STORY_CREATION_CHANGE_ACTIVE_BRUSH,brush:t}},e.changeBrushSize=function(t){return{type:r(d[0]).STORY_CREATION_CHANGE_BRUSH_SIZE,size:t}},e.changeColor=function(t){return{type:r(d[0]).STORY_CREATION_CHANGE_COLOR,color:t}},e.changeDrawColor=function(t){return{type:r(d[0]).STORY_CREATION_CHANGE_DRAW_COLOR,color:t}},e.editDrawing=function(){return i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_DOODLE_ENTER),{type:r(d[0]).STORY_CREATION_EDIT_DRAWING}},e.startDrawing=function(t){return{type:r(d[0]).STORY_CREATION_START_DRAWING,startIndex:t}},e.drawLineAction=function(t){return{type:r(d[0]).STORY_CREATION_DRAW_LINE,line:t}},e.useModal=function(t){return{type:r(d[0]).STORY_CREATION_USE_MODAL,isUsingModal:t}},e.undoDrawing=function(){return{type:r(d[0]).STORY_CREATION_UNDO_DRAWING}},e.saveDrawing=function(t){return i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_DOODLE_EXIT),{type:r(d[0]).STORY_CREATION_SAVE_DRAWING,timeSpent:t}},e.openStickerTool=function(){return{type:r(d[0]).STORY_CREATION_OPEN_STICKER_TOOL}},e.closeStickerTool=function(){return{type:r(d[0]).STORY_CREATION_CLOSE_STICKER_TOOL}},e.changeStickerOrder=function(t){return{type:r(d[0]).STORY_CREATION_CHANGE_STICKER_ORDER,bumpIndex:t}},e.addSticker=function(t){return{type:r(d[0]).STORY_CREATION_ADD_STICKER,sticker:t}},e.cacheStickerResults=function(){return(t,n)=>{const o=r(d[25]).getViewer(n());return r(d[7]).getPosition().then(n=>{const _={latitude:n.coords.latitude,longitude:n.coords.longitude};return i(d[14])(r(d[21]).getStickers({user:o,location:_}).then(n=>{const o=R(n.static_stickers);t({type:r(d[0]).STORY_CREATION_CACHE_STICKER_RESULTS,results:n.static_stickers.slice(o)})},n=>{t({type:r(d[0]).STORY_CREATION_CACHE_STICKER_RESULTS,results:E})}))},n=>i(d[14])(r(d[21]).getStickers({user:o,location:null}).then(n=>{const o=R(n.static_stickers);t({type:r(d[0]).STORY_CREATION_CACHE_STICKER_RESULTS,results:n.static_stickers.slice(o)})},n=>{t({type:r(d[0]).STORY_CREATION_CACHE_STICKER_RESULTS,results:E})})))}},e.resetStickerResults=function(){return(t,n)=>new Promise((n,o)=>(t({type:r(d[0]).STORY_CREATION_RESET_STICKER_RESULTS}),n({})))},e.saveStory=function(){return i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_SAVE),{type:r(d[0]).STORY_CREATION_SAVE_STORY}},e.attemptExitStoryCreation=function(){return(n,o)=>{r(d[6]).logStoryCreationEvent(t('exit_attempt',o())),i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_DISCARD_CONFIRMATION),n({type:r(d[0]).STORY_CREATION_EXIT_ATTEMPT})}},e.exitStoryCreation=function(){return(n,o)=>{r(d[6]).logStoryCreationEvent(t('exit',o())),i(d[1]).endFunnel(r(d[2]).STORY_CREATION_FUNNEL),n({type:r(d[0]).STORY_CREATION_EXIT})}},e.cancelExitStoryCreation=function(){return(n,o)=>{r(d[6]).logStoryCreationEvent(t('exit_cancel',o())),i(d[1]).appendAction(r(d[2]).STORY_CREATION_FUNNEL,r(d[2]).STORY_CREATION_DISCARD_CANCEL),n({type:r(d[0]).STORY_CREATION_EXIT_CANCEL})}},e.toggleStickerVariant=function(){return{type:r(d[0]).STORY_CREATION_TOGGLE_STICKER_VARIANT}}},11927557,[11927562,9633873,11927563,10223652,11927554,10027013,11927564,11927565,9633799,11927566,11927567,9633829,9961576,11862055,9633903,9633797,9633796,9961495,9633860,11862025,11927568,9633904,9633809,9830569,9830403,9633929]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});const T=r(d[0])(2316),_=r(d[0])(1064),E=r(d[0])(2624),O=r(d[0])(493),I=r(d[0])(410),R=r(d[0])(481),A=r(d[0])(1840),D=r(d[0])(2024),N=r(d[0])(340),X=r(d[0])(1179),C=r(d[0])(364),S=r(d[0])(1872),Y=r(d[0])(1039),P=r(d[0])(664),L=r(d[0])(1331),F=r(d[0])(242),M=r(d[0])(839),t=r(d[0])(2682),c=r(d[0])(2386),n=r(d[0])(1929),o=r(d[0])(1694);e.EXIT_STORY_CREATION_CONFIRM_TITLE=T,e.EXIT_STORY_CREATION_CONFIRM_TEXT=_,e.EXIT_STORY_VIDEO_CREATION_CONFIRM_TITLE=E,e.EXIT_STORY_VIDEO_CREATION_CONFIRM_TEXT=O,e.EXIT_STORY_CREATION_DISCARD_TEXT=I,e.EXIT_STORY_CREATION_KEEP_TEXT=R,e.EXIT_STORY_CREATION_KEEP_MEDIA_TEXT=A,e.STORY_LANDSCAPE_WARNING_TEXT=D,e.STORY_LANDSCAPE_WARNING_TEXT_EDITING=N,e.TAP_FOR_MORE=X,e.CANNOT_LOAD_STICKERS=C,e.CHECK_CONNECTION=S,e.RETRY=Y,e.ADD_TO_STORY_TEXT=P,e.PHOTO_ADDED_TEXT=L,e.VIDEO_ADDED_TEXT=F,e.UPLOAD_FAILED_TEXT=M,e.PHOTO_ADDED_TEXT_NEW=t,e.UPLOAD_FAILED_TEXT_NEW=c,e.YOUR_STORY_TEXT=n,e.SEND_TO_TEXT=o},11927554,[9633796]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});const t={event_name:'reel_creation_waterfall',library_upload_count:1,library_media_available:1,media_type:'1',source:'library',has_flash:!1,camera_position:null,capture_type:'normal',text_edit_count:0,text_edit_duration:0,tool_toggle_count:0,duration:0,color_toggle_count:0,save_media_count:0,has_text:!1,has_brush:!1,sticker_ids:[],sticker_toggle_count:0,has_sticker:!1};e.STORY_CREATION_EXIT_POINT={POST:1,EXIT:2,UNKNOWN:-1},e.logStoryCreationEvent=function(_){switch(_.step){case'enter':case'image_process_attempt':case'image_process_success':case'image_process_failure':return void r(d[0]).logPigeonEvent(r(d[1]).createEvent('instagram_web_story_creation',r(d[0]).getExtra({..._,event_name:'reel_creation_waterfall'})));case'compose_stage_attempt':case'compose_finalize_attempt':case'compose_failure':case'compose':case'exit_attempt':case'exit_cancel':case'exit':return void r(d[0]).logPigeonEvent(r(d[1]).createEvent('instagram_web_story_creation',r(d[0]).getExtra({...t,..._})))}}},11927564,[9633885,9633886]);
__d(function(g,r,i,a,m,e,d){"use strict";function t(t){return t.displayProperties.viewportWidth>=i(d[1])['feed-with-padding-threshold-min'].value}Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]),e.default=function(n){const l=r(d[2]).useSelector(t);return a(d[3]).createElement("div",{className:`zGtbP ${l?"IPQK5":""}`},a(d[3]).createElement(a(d[3]).Suspense,{fallback:a(d[3]).createElement(i(d[4]),null)},n.children))}},13238284,[13238291,9699330,5,3,13238285]);
__d(function() {},13238291,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]),e.default=function(){const t=window.innerWidth,n=Math.ceil(t/r(d[1]).MOBILE_TRAY_COL_WIDTH);return a(d[2]).createElement("div",{className:"CfWOi"},i(d[3])(n,t=>a(d[2]).createElement("div",{key:t,className:"vyqnV"},a(d[2]).createElement(i(d[4]),null))))}},13238285,[13238292,13238279,3,10027142,13238293]);
__d(function() {},13238292,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);const t=56;var n=function(){return a(d[1]).createElement(i(d[2]),{className:"y0gra",size:t})};e.default=n},13238293,[13238294,3,13107214]);
__d(function() {},13238294,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0}),r(d[0]);var t=function({className:t,hideAvatarBorder:s,size:n}){return a(d[1]).createElement("div",{className:i(d[2])("hHOPZ",t)},a(d[1]).createElement(i(d[3]),{className:"_4CvhT",isLoading:!1,seen:!0,showRing:!1,size:n}),a(d[1]).createElement("div",{className:`_7JZQt ${s?"":"LO-7C"}`,style:{height:n,width:n}}))};e.default=t},13107214,[13238295,3,9633813,12517443]);
__d(function() {},13238295,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=t=>{const{anchor:n,trigger:o}=t,c=r(d[0]).useSelector(n=>r(d[1]).getValidPromotion(n,t));if(!c||c.triggers.indexOf(o)<0)return null;const l=c.template.parameters;if(r(d[2]).getQPParameter(l,r(d[3]).QP_TOOLTIP_PARAMETERS.tooltip_anchor)!==n)return null;const{id:s,creatives:u,surface_id:f}=c;null!=u&&0!==u.length||i(d[4])(`Missing creatives in promotion ${s}`);const{content:p,title:_}=u[0];return a(d[5]).createElement(i(d[6]),{body:p,component:i(d[7]),parameters:l,promotionId:s,surfaceId:f,title:_})};e.default=t},13238286,[5,9961486,13238296,9961480,9633860,3,9961485,13238297]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});e.getQPParameter=((n,t)=>{if(!n)return null;const u=n.find(n=>n.name===t);return null===u||void 0===u?void 0:u.string_value})},13238296,[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});e.default=class extends a(d[3]).PureComponent{constructor(...t){super(...t),this.$QPContainer1=(()=>{const{surfaceId:t,promotionId:n}=this.props;return{nux_id:i(d[0])(t),promotion_id:n}}),this.$QPContainer3=(t=>{const n=this.$QPContainer1();r(d[1]).logQuickPromotionEvent(r(d[2]).LOG_EVENTS.click,{object_id:t,...n})}),this.$QPContainer4=(()=>{this.$QPContainer3(r(d[2]).OBJECT_IDS.primary)}),this.$QPContainer5=(()=>{this.$QPContainer3(r(d[2]).OBJECT_IDS.secondary)}),this.$QPContainer6=(()=>{this.$QPContainer3(r(d[2]).OBJECT_IDS.dismiss)}),this.$QPContainer2=(()=>{r(d[1]).logQuickPromotionEvent(r(d[2]).LOG_EVENTS.view,this.$QPContainer1())})}componentDidMount(){this.props.component&&this.$QPContainer2()}render(){const t=this.props.component,{body:n,dismissAction:o,image:s,imageSize:c,primaryAction:C,parameters:p,secondaryAction:P,title:h}=this.props;return null!=t&&a(d[3]).createElement(t,{body:n,dismissAction:o,image:s,imageSize:c,onDismissButtonClick:this.$QPContainer6,onPrimaryButtonClick:this.$QPContainer4,onSecondaryButtonClick:this.$QPContainer5,parameters:p,primaryAction:C,secondaryAction:P,title:h})}}},9961485,[9633799,9633885,9961480,3]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,'__esModule',{value:!0});var t=({title:t,parameters:o})=>{const l=null===t||void 0===t?void 0:t.text,n=r(d[0]).getQPParameter(o,r(d[1]).QP_TOOLTIP_PARAMETERS.tooltip_direction),P=r(d[0]).getQPParameter(o,r(d[1]).QP_TOOLTIP_PARAMETERS.tooltip_duration),_=1e3*Number(P);return null!=l&&a(d[2]).createElement(i(d[3]),{arrowPosition:n===r(d[1]).QP_TOOLTIP_DIRECTIONS.UP?'top':'bottom',autoHideAfter:_||i(d[4]).TOOLTIP.AUTO_HIDE_MS,color:"black"},a(d[2]).createElement(r(d[5]).Box,{maxWidth:"80vw"},a(d[2]).createElement(r(d[5]).Text,{color:"web-always-white",textAlign:"center",weight:"semibold",zeroMargin:!0},l)))};e.default=t},13238297,[13238296,9961480,3,13238298,11927561,9633863]);